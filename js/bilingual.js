// ===================================
// Translation Data
// ===================================
const translations = {
  en: {
    // Navigation
    nav: {
      home: 'Home',
      packages: 'Packages',
      classes: 'Classes',
      meals: 'Healthy Meals',
      science: 'The Science',
      contact: 'Contact Us'
    },
    
    // Home Page
    home: {
      heroTitle: 'Transform Your Body, Transform Your Life',
      heroSubtitle: 'Join our fitness community and achieve your health goals with expert guidance',
      heroButton: 'Get Started',
      
      aboutTitle: 'About Us',
      aboutText: 'We are a team of certified fitness trainers and nutritionists dedicated to helping you achieve your health and fitness goals through science-based programs and personalized guidance.',
      
      whyUsTitle: 'Why Choose Us?',
      whyUs1Title: 'Expert Trainers',
      whyUs1Text: 'Certified professionals with years of experience',
      whyUs2Title: 'Flexible Plans',
      whyUs2Text: 'Programs that fit your schedule and lifestyle',
      whyUs3Title: 'Proven Results',
      whyUs3Text: 'Thousands of successful transformations',
      whyUs4Title: 'Science-Based',
      whyUs4Text: 'Evidence-backed training and nutrition methods',
      
      pricingTitle: 'Our Packages',
      pricingSubtitle: 'Choose the perfect plan for your fitness journey',
      viewAllPackages: 'View All Packages'
    },
    
    // Packages Page
    packages: {
      title: 'Subscription Packages',
      subtitle: 'Choose the plan that works best for you',
      monthly: 'Monthly',
      quarterly: '3 Months',
      yearly: 'Annual',
      subscribe: 'Subscribe Now',
      features: 'Features Include:',
      popular: 'Most Popular'
    },
    
    // Classes Page
    classes: {
      title: 'Workout Classes',
      subtitle: 'Live and recorded fitness classes for all levels',
      duration: 'Duration',
      level: 'Level',
      beginner: 'Beginner',
      intermediate: 'Intermediate',
      advanced: 'Advanced',
      watchNow: 'Watch Now',
      freeContent: 'Free Content',
      premiumContent: 'Premium - Subscribe to Access'
    },
    
    // Meals Page
    meals: {
      title: 'Healthy Meal Plans',
      subtitle: 'Delicious and nutritious recipes for your fitness journey',
      prepTime: 'Prep Time',
      calories: 'Calories',
      protein: 'Protein',
      viewRecipe: 'View Recipe',
      ingredients: 'Ingredients',
      instructions: 'Instructions'
    },
    
    // Science Page
    science: {
      title: 'The Science Behind Fitness',
      subtitle: 'Evidence-based information about exercise and nutrition',
      latestPosts: 'Latest Articles',
      readMore: 'Read More',
      mythBusting: 'Myth Busting',
      fitnessScience: 'Fitness Science',
      nutritionScience: 'Nutrition Science'
    },
    
    // Footer
    footer: {
      contactTitle: 'Contact Us',
      followUs: 'Follow Us',
      quickLinks: 'Quick Links',
      complaintsTitle: 'Complaints & Suggestions',
      complaintsText: 'We value your feedback',
      submitFeedback: 'Submit Feedback',
      copyright: '© 2026 FitLife. All rights reserved.',
      phone: 'Phone',
      whatsapp: 'WhatsApp',
      email: 'Email'
    },
    
    // Contact Form
    contact: {
      nameLabel: 'Your Name',
      namePlaceholder: 'Enter your name',
      emailLabel: 'Email Address',
      emailPlaceholder: 'Enter your email',
      phoneLabel: 'Phone Number',
      phonePlaceholder: 'Enter your phone',
      messageLabel: 'Message',
      messagePlaceholder: 'Your message or suggestion...',
      submit: 'Send Message',
      successMessage: 'Thank you! We will get back to you soon.',
      errorMessage: 'Please fill in all required fields.'
    }
  },
  
  ar: {
    // Navigation
    nav: {
      home: 'الرئيسية',
      packages: 'الباقات',
      classes: 'الكلاسز',
      meals: 'وجبات صحية',
      science: 'العلم',
      contact: 'تواصل معنا'
    },
    
    // Home Page
    home: {
      heroTitle: 'حوّل جسمك، حوّل حياتك',
      heroSubtitle: 'انضم لمجتمعنا الرياضي وحقق أهدافك الصحية مع إرشاد الخبراء',
      heroButton: 'ابدأ الآن',
      
      aboutTitle: 'من نحن؟',
      aboutText: 'نحن فريق من المدربين الرياضيين وخبراء التغذية المعتمدين، نساعدك على تحقيق أهدافك الصحية واللياقية من خلال برامج علمية وإرشاد شخصي.',
      
      whyUsTitle: 'ما يميزنا؟',
      whyUs1Title: 'مدربون خبراء',
      whyUs1Text: 'محترفون معتمدون بخبرة سنوات',
      whyUs2Title: 'خطط مرنة',
      whyUs2Text: 'برامج تناسب جدولك ونمط حياتك',
      whyUs3Title: 'نتائج مثبتة',
      whyUs3Text: 'آلاف التحولات الناجحة',
      whyUs4Title: 'مدعوم علمياً',
      whyUs4Text: 'طرق تدريب وتغذية مبنية على الأدلة',
      
      pricingTitle: 'باقاتنا',
      pricingSubtitle: 'اختر الخطة المثالية لرحلتك الرياضية',
      viewAllPackages: 'عرض جميع الباقات'
    },
    
    // Packages Page
    packages: {
      title: 'باقات الاشتراك',
      subtitle: 'اختر الخطة الأنسب لك',
      monthly: 'شهري',
      quarterly: '٣ شهور',
      yearly: 'سنوي',
      subscribe: 'اشترك الآن',
      features: 'تشمل الباقة:',
      popular: 'الأكثر شعبية'
    },
    
    // Classes Page
    classes: {
      title: 'الكلاسز الرياضية',
      subtitle: 'حصص رياضية مباشرة ومسجلة لجميع المستويات',
      duration: 'المدة',
      level: 'المستوى',
      beginner: 'مبتدئ',
      intermediate: 'متوسط',
      advanced: 'متقدم',
      watchNow: 'شاهد الآن',
      freeContent: 'محتوى مجاني',
      premiumContent: 'محتوى مميز - اشترك للوصول'
    },
    
    // Meals Page
    meals: {
      title: 'خطط الوجبات الصحية',
      subtitle: 'وصفات لذيذة ومغذية لرحلتك الرياضية',
      prepTime: 'وقت التحضير',
      calories: 'سعرات حرارية',
      protein: 'بروتين',
      viewRecipe: 'عرض الوصفة',
      ingredients: 'المكونات',
      instructions: 'طريقة التحضير'
    },
    
    // Science Page
    science: {
      title: 'العلم وراء اللياقة',
      subtitle: 'معلومات علمية موثوقة عن التمارين والتغذية',
      latestPosts: 'أحدث المقالات',
      readMore: 'اقرأ المزيد',
      mythBusting: 'تصحيح المفاهيم',
      fitnessScience: 'علم الرياضة',
      nutritionScience: 'علم التغذية'
    },
    
    // Footer
    footer: {
      contactTitle: 'تواصل معنا',
      followUs: 'تابعنا',
      quickLinks: 'روابط سريعة',
      complaintsTitle: 'شكاوى ومقترحات',
      complaintsText: 'نحن نقدر ملاحظاتكم',
      submitFeedback: 'أرسل ملاحظاتك',
      copyright: '© ٢٠٢٦ فِت لايف. جميع الحقوق محفوظة.',
      phone: 'هاتف',
      whatsapp: 'واتساب',
      email: 'بريد إلكتروني'
    },
    
    // Contact Form
    contact: {
      nameLabel: 'اسمك',
      namePlaceholder: 'أدخل اسمك',
      emailLabel: 'البريد الإلكتروني',
      emailPlaceholder: 'أدخل بريدك الإلكتروني',
      phoneLabel: 'رقم الهاتف',
      phonePlaceholder: 'أدخل رقم هاتفك',
      messageLabel: 'الرسالة',
      messagePlaceholder: 'رسالتك أو اقتراحك...',
      submit: 'إرسال الرسالة',
      successMessage: 'شكراً! سنتواصل معك قريباً.',
      errorMessage: 'يرجى ملء جميع الحقول المطلوبة.'
    }
  }
};

// ===================================
// Language Management
// ===================================
class LanguageManager {
  constructor() {
    // Get saved language or default to Arabic
    this.currentLang = localStorage.getItem('preferredLanguage') || 'ar';
    this.init();
  }
  
  init() {
    // Set initial language
    this.setLanguage(this.currentLang, false);
    
    // Add event listeners to language toggle buttons
    document.addEventListener('DOMContentLoaded', () => {
      const langButtons = document.querySelectorAll('.lang-btn');
      langButtons.forEach(btn => {
        btn.addEventListener('click', (e) => {
          const lang = e.target.dataset.lang;
          this.setLanguage(lang);
        });
      });
    });
  }
  
  setLanguage(lang, saveToStorage = true) {
    this.currentLang = lang;
    
    // Save preference
    if (saveToStorage) {
      localStorage.setItem('preferredLanguage', lang);
    }
    
    // Update document attributes
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
    
    // Update active button state
    document.querySelectorAll('.lang-btn').forEach(btn => {
      if (btn.dataset.lang === lang) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    });
    
    // Update all translatable elements
    this.updatePageContent();
  }
  
  updatePageContent() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
      const key = element.dataset.i18n;
      const translation = this.getTranslation(key);
      
      if (translation) {
        // Update text content or placeholder based on element type
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
          if (element.placeholder !== undefined) {
            element.placeholder = translation;
          }
        } else {
          element.textContent = translation;
        }
      }
    });
    
    // Update elements with data-i18n-html (for HTML content)
    document.querySelectorAll('[data-i18n-html]').forEach(element => {
      const key = element.dataset.i18nHtml;
      const translation = this.getTranslation(key);
      
      if (translation) {
        element.innerHTML = translation;
      }
    });
  }
  
  getTranslation(key) {
    // Support nested keys like "nav.home"
    const keys = key.split('.');
    let value = translations[this.currentLang];
    
    for (const k of keys) {
      if (value && value[k] !== undefined) {
        value = value[k];
      } else {
        console.warn(`Translation not found for key: ${key}`);
        return null;
      }
    }
    
    return value;
  }
  
  t(key) {
    return this.getTranslation(key);
  }
}

// Initialize language manager
const langManager = new LanguageManager();

// Export for use in other scripts
window.langManager = langManager;
window.translations = translations;
